{
  "domain_key": "domain-{{.service.serviceName}}-egress",
  "zone_key": "{{ .Values.global.zone}}",
  "name": "*",
  "port": 10909,
  "redirects": null,
  "gzip_enabled": false,
  "cors_config": null,
  "custom_headers": [{"key": "x-forwarded-proto", "value": "https"}],
  "aliases": null{{- if and (.service.secret.enabled) (not .Values.global.spire.enabled) }},
  "ssl_config": {
      "protocols": [
        "SSLv3",
        "SSLv2",
        "TLSv1",
        "TLSv1.1",
        "TLSv1.2"
      ],
    "require_client_certs": true,
    "trust_file": "/etc/proxy/tls/sidecar/ca.crt",
    "cert_key_pairs": [
      {
        "certificate_path": "/etc/proxy/tls/sidecar/server.crt",
        "key_path": "/etc/proxy/tls/sidecar/server.key"
      }
    ]
  },
  "force_https": true
  {{- end }}
}
