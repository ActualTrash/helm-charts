{
    "domain_key": "edge-egress",
    "zone_key": "{{ .Values.global.zone}}",
    "name": "*",
    "port": 10909,
    "redirects": null,
    "gzip_enabled": false,
    "cors_config": null,
    "force_https": false,
    "custom_headers": [{"key": "x-forwarded-proto", "value": "https"}],
    "aliases": null{{ if and .Values.services.edge.egress.secret.enabled (not .Values.global.spire.enabled) }},
    "force_https": true,
    "ssl_config": {
        "protocols": ["SSLv3", "SSLv2", "TLSv1", "TLSv1.1", "TLSv1.2"],
        "require_client_certs": true,
        "trust_file": "{{ .Values.services.edge.egress.secret.mount_point }}/ca.crt",
        "cert_key_pairs": [
            {
                "certificate_path": "{{ .Values.services.edge.egress.secret.mount_point }}/server.crt",
                "key_path": "{{ .Values.services.edge.egress.secret.mount_point }}/server.key"
            }
        ]
    }
   {{- end }}
}